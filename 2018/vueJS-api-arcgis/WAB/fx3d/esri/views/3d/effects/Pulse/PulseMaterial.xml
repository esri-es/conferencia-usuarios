<?xml version="1.0" encoding="UTF-8"?><!-- Copyright @ 2018 Esri. All rights reserved under the copyright laws of the United States and applicable international laws, treaties, and conventions. --><snippets><snippet name="pulseFS"><![CDATA[
#ifdef GL_ES
precision mediump float;
#endif
uniform vec3 es;uniform vec4 ms;uniform vec4 os;uniform vec4 is;uniform vec3 ls;uniform float li;uniform vec3 ss;varying vec2 hh;varying vec3 cg;varying vec3 hd;varying vec4 hc;const vec3 a=vec3(1.0,1.0,1.0);const vec3 b=vec3(1.0,1.0,1.0);const vec3 c=vec3(0.4,0.4,0.4);void main(){vec3 d=normalize(hd-ls);vec3 e=normalize(cg);vec3 f=normalize(reflect(d,e));float g=max(dot(f,es),.001);vec3 h=c*is.rgb*is.w*pow(g,16.0);vec3 i=a*os.rgb*os.w*clamp(dot(e,es),.0,1.0);vec3 j=b*ms.rgb*ms.w;vec3 k=vec3(j+i+h);float l=abs(hh.x-0.5)/0.5;gl_FragColor=(1.0-l)*vec4(ss,1.0)+l*hc;gl_FragColor*=vec4(k,1.0);float m=li*0.01;gl_FragColor.w=m;}]]></snippet><snippet name="pulseVS"><![CDATA[attribute vec3 $position;attribute vec3 $auxpos1;uniform mat4 sp;uniform mat4 ie;uniform bool oi;uniform float po;uniform sampler2D el;uniform sampler2D si;uniform vec2 pi;uniform float lp;uniform vec2 lm;uniform float ll;uniform vec2 sl;uniform bool pl;uniform sampler2D ps;varying vec3 cg;varying vec3 hd;varying vec2 hh;varying vec4 hc; $lonlat2position  $translationMat  $linearInterpolator  $localTrans  $expoEaseOut const float a=0.0;const float b=1.0;const float c=2.0;const float d=3.0;void main(void){float e=fract($auxpos1.x/pi.x);float f=floor($auxpos1.x/pi.y)/pi.y;float g=(texture2D(el,vec2(e,f))).r;float h=(texture2D(si,vec2(e,f))).r;float i=mod(ll,lp);float j=getExpoEaseOutValue(i,g,h,lp);if(pl) j=h;float k=getLinearValue(sl,j);if(oi){float l=200000.0;if($auxpos1.y==a||$auxpos1.y==d){l=getScope(lm,k);}else if($auxpos1.y==b||$auxpos1.y==c){l=1.25*getScope(lm,k);}if($auxpos1.y==a) hh=vec2(0.0,0.0);else if($auxpos1.y==d) hh=vec2(0.0,1.0);else if($auxpos1.y==b) hh=vec2(1.0,0.0);else if($auxpos1.y==c) hh=vec2(1.0,1.0);float m=$auxpos1.z*2.0*PI;vec3 n=vec3(l*cos(m),l*sin(m),0.0);vec3 o,p;mat4 q=mat4(1.0);
#ifdef GLOBAL
mat4 r=getTransMat($position);q=toRotationMat(r);o=(r*vec4(n,1.0)).xyz;vec4 s=vec4(0.0,0.0,1.0,0.0);p=(q*s).xyz;
#else
o=wgs84ToWebMerc($position);o+=n;p=vec3(1.0,0.0,1.0);
#endif
gl_Position=sp*ie*vec4(o,1.0);cg=normalize(p);hd=o;hc=texture2D(ps,vec2(k,0.5));}else{float t=getScope(lm,k);mat4 r=getTransMat($position);float u=($auxpos1.y-po/2.0)*(20.0/po);float v=($auxpos1.z-po/2.0)*(20.0/po);float w=exp(-0.0831*(u*u+v*v));float x=atan(u,v);u=w*cos(2.0*x);v=w*sin(2.0*x);float y=sqrt(u*u+v*v)*getScope(lm,k);vec3 o=(r*vec4(t*($auxpos1.y/po-0.5),t*($auxpos1.z/po-0.5),y,1.0)).xyz;vec3 p=normalize(o);gl_Position=sp*ie*vec4(o,1.0);cg=p;hd=o;hh=$auxpos1.yz/(po-1.0);}}]]></snippet></snippets>