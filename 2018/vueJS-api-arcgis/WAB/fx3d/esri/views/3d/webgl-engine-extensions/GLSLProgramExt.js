/**
 * Copyright @ 2018 Esri.
 * All rights reserved under the copyright laws of the United States and applicable international laws, treaties, and conventions.
 */
define(["esri/views/3d/lib/gl-matrix"],function(t){var n=t.vec2d,r=t.vec3d,i=t.vec4d,e=0;return function(t,o){var a,u,f,l=e++,c=function(){if(null==a){a=o.createProgram();for(var n=0;n<t.length;++n)o.attachShader(a,t[n].getGLName());s()}},s=function(){null!=a&&(o.linkProgram(a),o.getProgramParameter(a,35714)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+o.getProgramParameter(a,35715)+", gl error ["+o.getError()+"] infoLog: "+o.getProgramInfoLog(a)),u={},f={})};this.dispose=function(){for(var n=0;n<t.length;++n){var r=t[n].getGLName();o.isShader(r)&&o.deleteShader(r)}o.isProgram(a)&&o.deleteProgram(a)},this.getId=function(){return l},this.getShader=function(n){return t["vertex"===n?0:1]},this.use=function(){c(),o.useProgram(a)},this.getLocation=function(t){return c(),null==u[t]&&(u[t]=o.getUniformLocation(a,t)),u[t]},this.hasUniform=function(t){return null!=this.getLocation(t)},this.getAttribLocation=function(t){return c(),null==f[t]&&(f[t]=o.getAttribLocation(a,t)),f[t]};var h={};this.uniform1i=function(t,n){var r=h[t];null!=r&&n===r||(o.uniform1i(this.getLocation(t,o),n),h[t]=n)},this.uniform1f=function(t,n){var r=h[t];null!=r&&n===r||(o.uniform1f(this.getLocation(t,o),n),h[t]=n)};var g={};this.uniform2f=function(t,r,i){var e=g[t];null!=e&&r===e[0]&&i===e[1]||(o.uniform2f(this.getLocation(t,o),r,i),null==e?g[t]=n.createFrom(r,i):n.set2(r,i,e))},this.uniform2fv=function(t,r){var i=g[t];(r.length>2||null==i||r[0]!==i[0]||r[1]!==i[1])&&(o.uniform2fv(this.getLocation(t,o),r),null==i?g[t]=n.create(r):n.set(r,i))};var m={};this.uniform3f=function(t,n,i,e){var a=m[t];null!=a&&n===a[0]&&i===a[1]&&e===a[2]||(o.uniform3f(this.getLocation(t,o),n,i,e),null==a?m[t]=r.createFrom(n,i,e):r.set3(n,i,e,a))},this.uniform3fv=function(t,n){var i=m[t];(n.length>3||null==i||n[0]!==i[0]||n[1]!==i[1]||n[2]!==i[2])&&(o.uniform3fv(this.getLocation(t,o),n),null==i?m[t]=r.create(n):r.set(n,i))};var v={};this.uniform4f=function(t,n,r,e,a){var u=v[t];null!=u&&n===u[0]&&r===u[1]&&e===u[2]&&a===u[3]||(o.uniform4f(this.getLocation(t,o),n,r,e,a),null==u?v[t]=i.createFrom(n,r,e,a):i.set4(n,r,e,a,u))},this.uniform4fv=function(t,n){var r=v[t];(n.length>4||null==r||n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2]||n[3]!==r[3])&&(o.uniform4fv(this.getLocation(t,o),n),null==r?v[t]=i.create(n):i.set(n,r))},this.uniformMatrix4fv=function(t,n){o.uniformMatrix4fv(this.getLocation(t,o),!1,n)},this.dispose=function(){if(null!=a){for(var n=0;n<t.length;++n){var r=t[n].getGLName();o.detachShader(a,r),o.deleteShader(r)}o.deleteProgram(a)}}}});